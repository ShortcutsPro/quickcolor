<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<!-- iOS support -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="QuickColor" />
    <meta name="theme-color" id="theme" content="#00CBDE" />
      <title>
        QuickColor‚†Ä|‚†ÄùòΩùô™ùô®ùô©ùô°.‚Ä¢io
      </title>
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="author" content="ShortcutsPro" />
<!-- open graph rich link support -->
    <meta property="og:title" content="QuickColor‚†Ä|‚†ÄùòΩùô™ùô®ùô©ùô°.‚Ä¢io" />
    <meta property="og:image" content="image.png" />
    <meta property="og:author" content="ShortcutsPro" />
    <meta property="og:description" content="a colorpicker for iOS Shortcuts" />
    <link rel="icon" href="apple-touch-icon.png" />

    <style>
      *, *::before, *::after { 
        box-sizing:border-box; 
        margin:0; 
      }
      :root {
        --dark: #333333;
        --light: #EAEAEA;
        --icon-color: #00CBDE;
      }
      @media (prefers-color-scheme: light) {
        :root {
        --color:var(--dark); 
        --background:var(--light);
        }
      }
      @media (prefers-color-scheme: dark) {
        :root {
        --color:var(--light); 
        --background:var(--dark);
        }
      }
      html {
        font-family:monospace; 
        margin:0;
        max-width:100%;
      }
      body {
        margin:auto; 
        min-height:100vh;
        max-width:100vw;
        align-items:center; 
        text-align:center; 
        color:var(--color); 
        background:var(--background);
        position: relative;
      }
      .popup-parent {
        position:fixed;
        top: 10vh;
        width:100%;
      }
      @media(max-width:500px) {
        .layout_default.picker_wrapper {font-size:7px;}
        .layout_default .picker_editor {width:100%;}
      }
    </style>
<!-- vanilla picker Copyright 2017-2018 Andreas Borgen, Adam Brooks, used with permission -->
    <script src="https://unpkg.com/vanilla-picker@2"></script>
    <script src="vanilla-picker.csp.min.js"></script>
    <link  href="vanilla-picker.csp.css" rel="stylesheet">
<!--    <script src="/vanilla-picker/vanilla-picker.min.js"></script> -->
    <script>
      window.onload = init;
      function init() {
        "use strict";
        function $(selector, context) {
            return (context || document).querySelector(selector);
        }
        var parentBasic = $('#basic')
        /* Basic example */
        var popupBasic = new Picker({
          parent: parentBasic,
          popup: false,
          editorFormat: 'hex',
          alpha: true,
          color: '#00CBDEFF',
          onChange: function (color) {
            let colorObj = {
              'hex': color.hex,
              'rgbString': color.rgbString,
              'hslString': color.hslString,
              'rgbaString': color.rgbaString,
              'rgba': color.rgba,
              'hslaString': color.hslaString,
              'hsla': color.hsla
            }
            let colorString = JSON.stringify(colorObj)
            sessionStorage.setItem('color',colorString)
            document.getElementById('theme').setAttribute('content', color.rgbString)
            document.body.style.backgroundColor = color.rgbaString;}
          }
        );
      popupBasic.openHandler();
      }
    </script>
  </head>
  <body>

    <center>
      <div id="basic" class="popup-parent"></div>
    </center>

    <script>
      document.getElementById('basic').addEventListener('mouseup', () => {
        let color = sessionStorage.getItem('color')
        let saved = sessionStorage.getItem('saved')
        if (saved != null) {
          saved += ',' + color
        } else saved = color
        sessionStorage.setItem('saved',saved)
        let copy = '\[' + saved + '\]'
        copy = JSON.stringify(JSON.parse(copy),null,'\t')
        navigator.clipboard.writeText(copy)
        console.log(copy)
      })
    </script>
  </body>
</html>